{% extends "base.html" %}

{% block content %}
<style>
    .glass-bg {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .hero-banner {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 20px;
        padding: 40px;
        color: white;
        margin-bottom: 30px;
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
    }

    .stat-card {
        border-radius: 20px;
        padding: 25px;
        height: 100%;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .icon-box {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 15px;
    }

    .bg-soft-primary {
        background: #e0e7ff;
        color: #4338ca;
    }

    .bg-soft-success {
        background: #dcfce7;
        color: #15803d;
    }

    .bg-soft-info {
        background: #e0f2fe;
        color: #0369a1;
    }

    .quick-link {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        border-radius: 15px;
        text-decoration: none;
        color: #4b5563;
        transition: all 0.2s;
        border: 1px solid #f3f4f6;
    }

    .quick-link:hover {
        background: #f9fafb;
        border-color: #e5e7eb;
        color: #1f2937;
    }

    .quick-link i {
        font-size: 1.25rem;
        margin-right: 15px;
    }

    .ranking-item {
        display: flex;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid #f3f4f6;
    }

    .ranking-item:last-child {
        border-bottom: none;
    }

    .rank-badge {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 15px;
        font-size: 0.875rem;
    }

    .rank-1 {
        background: #fef3c7;
        color: #92400e;
    }

    .rank-2 {
        background: #f3f4f6;
        color: #374151;
    }

    .rank-3 {
        background: #ffedd5;
        color: #9a3412;
    }
</style>

<div class="row align-items-center mb-4">
    <div class="col">
        <h1 class="h3 fw-bold mb-1">ç­çº§å…¨å±€æ¦‚è§ˆ</h1>
        <p class="text-muted mb-0">å®æ—¶æŒæ¡ç­çº§åŠ¨æ€ä¸å­¦ç”Ÿè¡¨ç°</p>
    </div>
    <div class="col-auto">
        <span class="badge bg-white text-primary border shadow-sm px-3 py-2 rounded-pill">
            <i class="bi bi-clock me-1"></i> æœ€åæ›´æ–°: åˆšåˆš
        </span>
    </div>
</div>

<div class="hero-banner">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h2 class="fw-bold mb-3">ä½ å¥½ï¼Œä¼˜ç§€ç­ä¸»ä»» ğŸ‘‹</h2>
            <p class="lead mb-4 opacity-75">ä»Šå¤©æœ‰ {{ today_records }} æ¡è®°å½•ï¼Œç»§ç»­åŠ æ²¹ç®¡ç†ä½ çš„ç­çº§ï¼</p>
            <div class="d-flex gap-3">
                <a href="{{ url_for('add_points') }}" class="btn btn-light rounded-pill px-4">
                    <i class="bi bi-plus-circle me-1"></i> å½•å…¥ç§¯åˆ†
                </a>
                <a href="{{ url_for('rankings') }}" class="btn btn-outline-light rounded-pill px-4">
                    <i class="bi bi-bar-chart me-1"></i> æ’åç»Ÿè®¡
                </a>
            </div>
        </div>
        <div class="col-md-4 d-none d-md-block text-end">
            <i class="bi bi-rocket-takeoff" style="font-size: 8rem; opacity: 0.2;"></i>
        </div>
    </div>
</div>

<div class="row g-4 mb-5">
    <div class="col-md-4">
        <div class="card stat-card border-0 shadow-sm">
            <div class="card-body">
                <div class="icon-box bg-soft-primary">
                    <i class="bi bi-people-fill"></i>
                </div>
                <h6 class="text-muted fw-bold mb-1">å­¦ç”Ÿæ€»æ•°</h6>
                <div class="h3 fw-bold mb-0">{{ total_students }} <small class="fs-6 text-muted fw-normal">äºº</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card stat-card border-0 shadow-sm">
            <div class="card-body">
                <div class="icon-box bg-soft-success">
                    <i class="bi bi-journal-text"></i>
                </div>
                <h6 class="text-muted fw-bold mb-1">ç´¯è®¡ç§¯åˆ†è®°å½•</h6>
                <div class="h3 fw-bold mb-0">{{ total_records }} <small class="fs-6 text-muted fw-normal">æ¬¡</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card stat-card border-0 shadow-sm">
            <div class="card-body">
                <div class="icon-box bg-soft-info">
                    <i class="bi bi-lightning-fill"></i>
                </div>
                <h6 class="text-muted fw-bold mb-1">ä»Šæ—¥ç§¯åˆ†åŠ¨æ€</h6>
                <div class="h3 fw-bold mb-0">{{ today_records }} <small class="fs-6 text-muted fw-normal">é¡¹</small>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-7">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-white border-0 pt-4 px-4 d-flex justify-content-between align-items-center">
                <h5 class="fw-bold mb-0">åŠŸèƒ½å¯¼èˆª</h5>
                <i class="bi bi-three-dots-vertical text-muted"></i>
            </div>
            <div class="card-body p-4">
                <div class="row g-3">
                    <div class="col-6">
                        <a href="{{ url_for('students') }}" class="quick-link">
                            <i class="bi bi-person-badge text-primary"></i>
                            <span>å­¦ç”Ÿä¿¡æ¯</span>
                        </a>
                    </div>
                    <div class="col-6">
                        <a href="{{ url_for('groups') }}" class="quick-link">
                            <i class="bi bi-grid-3x3-gap text-success"></i>
                            <span>å°ç»„æ¶æ„</span>
                        </a>
                    </div>
                    <div class="col-6">
                        <a href="{{ url_for('points_records') }}" class="quick-link">
                            <i class="bi bi-search text-warning"></i>
                            <span>è®°å½•æŸ¥è¯¢</span>
                        </a>
                    </div>
                    <div class="col-6">
                        <a href="{{ url_for('categories') }}" class="quick-link">
                            <i class="bi bi-tags text-danger"></i>
                            <span>ç§¯åˆ†ç±»åˆ«</span>
                        </a>
                    </div>
                    <div class="col-12">
                        <a href="{{ url_for('export_data') }}" class="quick-link border-primary border-opacity-25"
                            style="background: #f0f7ff;">
                            <i class="bi bi-cloud-download text-primary"></i>
                            <span class="text-primary fw-bold">ç”Ÿæˆç­çº§æœˆåº¦æŠ¥è¡¨ (Excel)</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-5">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-white border-0 pt-4 px-4">
                <h5 class="fw-bold mb-0">ç³»ç»ŸçŠ¶æ€</h5>
            </div>
            <div class="card-body p-4 text-center d-flex flex-column justify-content-center">
                <div class="mb-3">
                    <i class="bi bi-shield-check text-success" style="font-size: 3rem;"></i>
                </div>
                <h6 class="fw-bold">è¿è¡Œè‰¯å¥½</h6>
                <p class="small text-muted mb-4">
                    æ‰€æœ‰æœåŠ¡å¤„äºåœ¨çº¿çŠ¶æ€ã€‚æ‚¨çš„ç­çº§æ•°æ®å·²å®‰å…¨åŒæ­¥åˆ° D1 æ•°æ®åº“ã€‚
                </p>
                <div class="alert alert-warning border-0 small mb-0 text-start">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    å»ºè®®å®šæœŸå¯¼å‡ºæ•°æ®æŠ¥è¡¨ä»¥ç¡®ä¿ç¦»çº¿å¤‡ä»½ã€‚
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}